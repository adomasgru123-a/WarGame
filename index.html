<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Country War Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: white;
        }

        /* Country Selection Screen */
        #country-selection {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }

        #country-selection h1 {
            font-size: 3rem;
            margin-bottom: 50px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .countries-container {
            display: flex;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 900px;
        }

        .country-card {
            background: rgba(255,255,255,0.1);
            border: 3px solid transparent;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            width: 150px;
        }

        .country-card:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-5px);
        }

        .country-card.selected {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.3);
        }

        .country-flag {
            font-size: 4rem;
            margin-bottom: 15px;
        }

        .country-name {
            font-size: 1.3rem;
            font-weight: bold;
        }

        #start-btn {
            padding: 15px 60px;
            font-size: 1.5rem;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.5;
            pointer-events: none;
        }

        #start-btn.active {
            opacity: 1;
            pointer-events: all;
        }

        #start-btn.active:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(76, 175, 80, 0.5);
        }

        /* Game Screen */
        #game-screen {
            display: none;
            min-height: 100vh;
        }

        .game-header {
            background: rgba(0,0,0,0.3);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .player-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .player-flag {
            font-size: 2rem;
        }

        .player-country {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .resources {
            display: flex;
            gap: 30px;
        }

        .resource {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255,255,255,0.1);
            padding: 8px 15px;
            border-radius: 20px;
        }

        .resource-icon {
            font-size: 1.3rem;
        }

        .resource-value {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .game-content {
            display: flex;
            height: calc(100vh - 70px);
        }

        .main-area {
            flex: 1;
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .units-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 30px;
            max-width: 500px;
        }

        .army-display {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
        }

        .army-display h2 {
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .army-count {
            font-size: 2.5rem;
            font-weight: bold;
            color: #4CAF50;
        }

        .army-icon {
            font-size: 2rem;
            margin-top: 5px;
        }

        /* Right Menu */
        .right-menu {
            width: 80px;
            background: rgba(0,0,0,0.4);
            display: flex;
            flex-direction: column;
            padding: 20px 10px;
            gap: 15px;
        }

        .menu-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 10px;
            padding: 15px 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .menu-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 3px 15px rgba(102, 126, 234, 0.5);
        }

        .menu-btn-icon {
            font-size: 1.5rem;
            display: block;
            margin-bottom: 5px;
        }

        /* Modal Overlay */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: linear-gradient(135deg, #2d3436 0%, #1a1a2e 100%);
            border-radius: 20px;
            padding: 30px;
            min-width: 400px;
            max-width: 500px;
            border: 2px solid rgba(255,255,255,0.1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .modal-header h2 {
            font-size: 1.8rem;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s;
        }

        .close-btn:hover {
            opacity: 1;
        }

        /* Shop Items */
        .shop-item {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .shop-item-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .shop-item-icon {
            font-size: 2rem;
        }

        .shop-item-name {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .shop-item-desc {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .buy-btn {
            background: linear-gradient(135deg, #f39c12, #e74c3c);
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .buy-btn:hover {
            transform: scale(1.05);
        }

        .buy-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Stats */
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .stat-label {
            opacity: 0.8;
        }

        .stat-value {
            font-weight: bold;
            color: #4CAF50;
        }

        /* Settings */
        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .toggle-btn {
            background: #555;
            border: none;
            border-radius: 20px;
            width: 50px;
            height: 26px;
            cursor: pointer;
            position: relative;
            transition: background 0.3s;
        }

        .toggle-btn.active {
            background: #4CAF50;
        }

        .toggle-btn::after {
            content: '';
            position: absolute;
            width: 22px;
            height: 22px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: left 0.3s;
        }

        .toggle-btn.active::after {
            left: 26px;
        }

        .reset-btn {
            background: #e74c3c;
            border: none;
            border-radius: 8px;
            padding: 12px 25px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            margin-top: 20px;
            width: 100%;
            transition: all 0.3s;
        }

        .reset-btn:hover {
            background: #c0392b;
        }

        /* Attack Button Style */
        .menu-btn.attack-btn {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }

        .menu-btn.attack-btn:hover {
            box-shadow: 0 3px 15px rgba(231, 76, 60, 0.5);
        }

        /* Enemy Country Cards */
        .enemy-country {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .enemy-country:hover {
            background: rgba(255,255,255,0.2);
        }

        .enemy-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .enemy-flag {
            font-size: 2rem;
        }

        .enemy-name {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .enemy-army {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .attack-country-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .attack-country-btn:hover {
            transform: scale(1.05);
        }

        /* Battle Result */
        .battle-result-content {
            text-align: center;
            padding: 20px;
        }

        .battle-icon {
            font-size: 5rem;
            margin-bottom: 20px;
        }

        .battle-status {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .battle-status.victory {
            color: #4CAF50;
        }

        .battle-status.defeat {
            color: #e74c3c;
        }

        .battle-details {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .battle-detail-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .battle-detail-row:last-child {
            border-bottom: none;
        }

        .battle-reward {
            color: #4CAF50;
            font-weight: bold;
        }

        .battle-loss {
            color: #e74c3c;
            font-weight: bold;
        }

        /* Quests Button Style */
        .menu-btn.quests-btn {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
        }

        .menu-btn.quests-btn:hover {
            box-shadow: 0 3px 15px rgba(243, 156, 18, 0.5);
        }

        /* Quests Styles */
        .quest-category {
            margin-bottom: 25px;
        }

        .quest-category-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255,255,255,0.2);
            color: #f39c12;
        }

        .quest-item {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .quest-item.completed {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid rgba(76, 175, 80, 0.5);
        }

        .quest-info {
            flex: 1;
        }

        .quest-name {
            font-weight: bold;
            font-size: 1rem;
            margin-bottom: 5px;
        }

        .quest-progress {
            font-size: 0.85rem;
            opacity: 0.7;
        }

        .quest-reward {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            padding: 8px 15px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        .quest-reward.claimed {
            background: #4CAF50;
        }

        .claim-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            border: none;
            border-radius: 8px;
            padding: 8px 15px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .claim-btn:hover {
            transform: scale(1.05);
        }

        .quest-check {
            color: #4CAF50;
            font-size: 1.5rem;
        }

        /* Attack Setup Styles */
        .attack-setup-row {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .attack-setup-row label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .input-group {
            display: flex;
            gap: 5px;
            align-items: center;
            margin-bottom: 8px;
        }

        .input-group input {
            width: 80px;
            padding: 8px;
            border: none;
            border-radius: 5px;
            text-align: center;
            font-size: 1.1rem;
            background: rgba(255,255,255,0.2);
            color: white;
        }

        .adjust-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            border-radius: 5px;
            padding: 8px 12px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }

        .adjust-btn:hover {
            transform: scale(1.05);
        }

        .adjust-btn.max-btn {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .available {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .total-power {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .launch-attack-btn {
            width: 100%;
            padding: 15px;
            font-size: 1.3rem;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .launch-attack-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 20px rgba(231, 76, 60, 0.5);
        }

        .enemy-forces {
            background: rgba(231, 76, 60, 0.2);
            border: 1px solid rgba(231, 76, 60, 0.5);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .enemy-forces-title {
            color: #e74c3c;
            font-weight: bold;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <!-- Country Selection Screen -->
    <div id="country-selection">
        <h1>Choose Your Country</h1>
        <div class="countries-container">
            <div class="country-card" data-country="Spain" data-flag="üá™üá∏">
                <div class="country-flag">üá™üá∏</div>
                <div class="country-name">Spain</div>
            </div>
            <div class="country-card" data-country="France" data-flag="üá´üá∑">
                <div class="country-flag">üá´üá∑</div>
                <div class="country-name">France</div>
            </div>
            <div class="country-card" data-country="Germany" data-flag="üá©üá™">
                <div class="country-flag">üá©üá™</div>
                <div class="country-name">Germany</div>
            </div>
            <div class="country-card" data-country="United Kingdom" data-flag="üá¨üáß">
                <div class="country-flag">üá¨üáß</div>
                <div class="country-name">United Kingdom</div>
            </div>
            <div class="country-card" data-country="Italy" data-flag="üáÆüáπ">
                <div class="country-flag">üáÆüáπ</div>
                <div class="country-name">Italy</div>
            </div>
            <div class="country-card" data-country="Lithuania" data-flag="üá±üáπ">
                <div class="country-flag">üá±üáπ</div>
                <div class="country-name">Lithuania</div>
            </div>
            <div class="country-card" data-country="Belgium" data-flag="üáßüá™">
                <div class="country-flag">üáßüá™</div>
                <div class="country-name">Belgium</div>
            </div>
        </div>
        <button id="start-btn">START GAME</button>
    </div>

    <!-- Game Screen -->
    <div id="game-screen">
        <div class="game-header">
            <div class="player-info">
                <span class="player-flag" id="player-flag">üá™üá∏</span>
                <span class="player-country" id="player-country">Spain</span>
            </div>
            <div class="resources">
                <div class="resource">
                    <span class="resource-icon">üí∞</span>
                    <span class="resource-value" id="gold-display">1000</span>
                </div>
                <div class="resource">
                    <span class="resource-icon">‚öîÔ∏è</span>
                    <span class="resource-value" id="army-header-display">10</span>
                </div>
                <div class="resource">
                    <span class="resource-icon">üõ°Ô∏è</span>
                    <span class="resource-value" id="tanks-header-display">0</span>
                </div>
                <div class="resource">
                    <span class="resource-icon">‚úàÔ∏è</span>
                    <span class="resource-value" id="planes-header-display">0</span>
                </div>
                <div class="resource">
                    <span class="resource-icon">üö¢</span>
                    <span class="resource-value" id="ships-header-display">0</span>
                </div>
            </div>
        </div>
        <div class="game-content">
            <div class="main-area">
                <div class="units-grid">
                    <div class="army-display">
                        <h2>Soldiers</h2>
                        <div class="army-count" id="army-display">10</div>
                        <div class="army-icon">‚öîÔ∏è</div>
                    </div>
                    <div class="army-display">
                        <h2>Tanks</h2>
                        <div class="army-count" id="tanks-display" style="color: #f39c12;">0</div>
                        <div class="army-icon">üõ°Ô∏è</div>
                    </div>
                    <div class="army-display">
                        <h2>Planes</h2>
                        <div class="army-count" id="planes-display" style="color: #3498db;">0</div>
                        <div class="army-icon">‚úàÔ∏è</div>
                    </div>
                    <div class="army-display">
                        <h2>Battleships</h2>
                        <div class="army-count" id="ships-display" style="color: #9b59b6;">0</div>
                        <div class="army-icon">üö¢</div>
                    </div>
                </div>
            </div>
            <div class="right-menu">
                <button class="menu-btn attack-btn" onclick="openModal('attack')">
                    <span class="menu-btn-icon">‚öîÔ∏è</span>
                    Attack
                </button>
                <button class="menu-btn" onclick="openModal('shop')">
                    <span class="menu-btn-icon">üõí</span>
                    Shop
                </button>
                <button class="menu-btn" onclick="openModal('stats')">
                    <span class="menu-btn-icon">üìä</span>
                    Stats
                </button>
                <button class="menu-btn quests-btn" onclick="openModal('quests')">
                    <span class="menu-btn-icon">üìú</span>
                    Quests
                </button>
                <button class="menu-btn" onclick="openModal('settings')">
                    <span class="menu-btn-icon">‚öôÔ∏è</span>
                    Settings
                </button>
            </div>
        </div>
    </div>

    <!-- Shop Modal -->
    <div class="modal-overlay" id="shop-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>üõí Shop</h2>
                <button class="close-btn" onclick="closeModal('shop')">&times;</button>
            </div>
            <div class="shop-item">
                <div class="shop-item-info">
                    <span class="shop-item-icon">üó°Ô∏è</span>
                    <div>
                        <div class="shop-item-name">Infantry</div>
                        <div class="shop-item-desc">+10 Army</div>
                    </div>
                </div>
                <button class="buy-btn" onclick="buyArmy(10, 100)">üí∞ 100</button>
            </div>
            <div class="shop-item">
                <div class="shop-item-info">
                    <span class="shop-item-icon">üèπ</span>
                    <div>
                        <div class="shop-item-name">Archers</div>
                        <div class="shop-item-desc">+25 Army</div>
                    </div>
                </div>
                <button class="buy-btn" onclick="buyArmy(25, 200)">üí∞ 200</button>
            </div>
            <div class="shop-item">
                <div class="shop-item-info">
                    <span class="shop-item-icon">üê¥</span>
                    <div>
                        <div class="shop-item-name">Cavalry</div>
                        <div class="shop-item-desc">+50 Army</div>
                    </div>
                </div>
                <button class="buy-btn" onclick="buyArmy(50, 350)">üí∞ 350</button>
            </div>
            <div class="shop-item">
                <div class="shop-item-info">
                    <span class="shop-item-icon">üè∞</span>
                    <div>
                        <div class="shop-item-name">Elite Knights</div>
                        <div class="shop-item-desc">+100 Army</div>
                    </div>
                </div>
                <button class="buy-btn" onclick="buyArmy(100, 600)">üí∞ 600</button>
            </div>
            <div class="shop-item" style="border: 2px solid #f39c12;">
                <div class="shop-item-info">
                    <span class="shop-item-icon">üõ°Ô∏è</span>
                    <div>
                        <div class="shop-item-name">Tank</div>
                        <div class="shop-item-desc">+1 Tank (= 50 power)</div>
                    </div>
                </div>
                <button class="buy-btn" onclick="buyUnit('tanks', 1, 300)">üí∞ 300</button>
            </div>
            <div class="shop-item" style="border: 2px solid #3498db;">
                <div class="shop-item-info">
                    <span class="shop-item-icon">‚úàÔ∏è</span>
                    <div>
                        <div class="shop-item-name">Fighter Plane</div>
                        <div class="shop-item-desc">+1 Plane (= 75 power)</div>
                    </div>
                </div>
                <button class="buy-btn" onclick="buyUnit('planes', 1, 400)">üí∞ 400</button>
            </div>
            <div class="shop-item" style="border: 2px solid #9b59b6;">
                <div class="shop-item-info">
                    <span class="shop-item-icon">üö¢</span>
                    <div>
                        <div class="shop-item-name">Battleship</div>
                        <div class="shop-item-desc">+1 Ship (= 100 power)</div>
                    </div>
                </div>
                <button class="buy-btn" onclick="buyUnit('ships', 1, 500)">üí∞ 500</button>
            </div>
        </div>
    </div>

    <!-- Stats Modal -->
    <div class="modal-overlay" id="stats-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>üìä Stats</h2>
                <button class="close-btn" onclick="closeModal('stats')">&times;</button>
            </div>
            <div class="stat-row">
                <span class="stat-label">Country</span>
                <span class="stat-value" id="stat-country">Spain</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Gold</span>
                <span class="stat-value" id="stat-gold">1000</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Army Size</span>
                <span class="stat-value" id="stat-army">10</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Tanks</span>
                <span class="stat-value" id="stat-tanks" style="color: #f39c12;">0</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Planes</span>
                <span class="stat-value" id="stat-planes" style="color: #3498db;">0</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Battleships</span>
                <span class="stat-value" id="stat-ships" style="color: #9b59b6;">0</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Total Purchased</span>
                <span class="stat-value" id="stat-purchased">0</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Gold Spent</span>
                <span class="stat-value" id="stat-spent">0</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Battles Won</span>
                <span class="stat-value" id="stat-won" style="color: #4CAF50;">0</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Battles Lost</span>
                <span class="stat-value" id="stat-lost" style="color: #e74c3c;">0</span>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settings-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>‚öôÔ∏è Settings</h2>
                <button class="close-btn" onclick="closeModal('settings')">&times;</button>
            </div>
            <div class="setting-row">
                <span>Sound Effects</span>
                <button class="toggle-btn active" id="sound-toggle" onclick="toggleSetting(this)"></button>
            </div>
            <div class="setting-row">
                <span>Music</span>
                <button class="toggle-btn active" id="music-toggle" onclick="toggleSetting(this)"></button>
            </div>
            <div class="setting-row">
                <span>Notifications</span>
                <button class="toggle-btn" id="notif-toggle" onclick="toggleSetting(this)"></button>
            </div>
            <button class="reset-btn" onclick="resetGame()">Reset Game</button>
        </div>
    </div>

    <!-- Attack Modal -->
    <div class="modal-overlay" id="attack-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>‚öîÔ∏è Attack Country</h2>
                <button class="close-btn" onclick="closeModal('attack')">&times;</button>
            </div>
            <p style="margin-bottom: 20px; opacity: 0.8;">Choose a country to attack. Enemy forces are unknown!</p>
            <div id="attack-countries-list"></div>
        </div>
    </div>

    <!-- Attack Setup Modal -->
    <div class="modal-overlay" id="attack-setup-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>‚öîÔ∏è Prepare Attack</h2>
                <button class="close-btn" onclick="closeModal('attack-setup')">&times;</button>
            </div>
            <p style="margin-bottom: 15px;">Attacking: <strong id="target-country-name"></strong> <span id="target-country-flag"></span></p>

            <div class="attack-setup-row">
                <label>Soldiers to send:</label>
                <div class="input-group">
                    <button class="adjust-btn" onclick="adjustSoldiers(-10)">-10</button>
                    <input type="number" id="soldiers-input" value="10" min="1">
                    <button class="adjust-btn" onclick="adjustSoldiers(10)">+10</button>
                    <button class="adjust-btn max-btn" onclick="setMaxSoldiers()">MAX</button>
                </div>
                <span class="available">Available: <span id="available-soldiers">10</span></span>
            </div>

            <div class="attack-setup-row">
                <label>Tanks to send: <small>(50 power each)</small></label>
                <div class="input-group">
                    <button class="adjust-btn" onclick="adjustUnit('tanks', -1)">-1</button>
                    <input type="number" id="tanks-input" value="0" min="0" onchange="updateTotalPower()">
                    <button class="adjust-btn" onclick="adjustUnit('tanks', 1)">+1</button>
                    <button class="adjust-btn max-btn" onclick="setMaxUnit('tanks')">MAX</button>
                </div>
                <span class="available">Available: <span id="available-tanks">0</span></span>
            </div>

            <div class="attack-setup-row">
                <label>Planes to send: <small>(75 power each)</small></label>
                <div class="input-group">
                    <button class="adjust-btn" onclick="adjustUnit('planes', -1)">-1</button>
                    <input type="number" id="planes-input" value="0" min="0" onchange="updateTotalPower()">
                    <button class="adjust-btn" onclick="adjustUnit('planes', 1)">+1</button>
                    <button class="adjust-btn max-btn" onclick="setMaxUnit('planes')">MAX</button>
                </div>
                <span class="available">Available: <span id="available-planes">0</span></span>
            </div>

            <div class="attack-setup-row">
                <label>Battleships to send: <small>(100 power each)</small></label>
                <div class="input-group">
                    <button class="adjust-btn" onclick="adjustUnit('ships', -1)">-1</button>
                    <input type="number" id="ships-input" value="0" min="0" onchange="updateTotalPower()">
                    <button class="adjust-btn" onclick="adjustUnit('ships', 1)">+1</button>
                    <button class="adjust-btn max-btn" onclick="setMaxUnit('ships')">MAX</button>
                </div>
                <span class="available">Available: <span id="available-ships">0</span></span>
            </div>

            <div class="total-power">
                Total Attack Power: <span id="total-power">10</span>
            </div>

            <button class="launch-attack-btn" onclick="launchAttack()">üöÄ Launch Attack!</button>
        </div>
    </div>

    <!-- Battle Result Modal -->
    <div class="modal-overlay" id="battle-modal">
        <div class="modal" id="battle-modal-content">
            <div class="modal-header">
                <h2 id="battle-title">Battle Result</h2>
                <button class="close-btn" onclick="closeModal('battle')">&times;</button>
            </div>
            <div id="battle-result"></div>
        </div>
    </div>

    <!-- Quests Modal -->
    <div class="modal-overlay" id="quests-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>üìú Quests</h2>
                <button class="close-btn" onclick="closeModal('quests')">&times;</button>
            </div>
            <div id="quests-content"></div>
        </div>
    </div>

    <script>
        // Game State
        let gameState = {
            country: null,
            flag: null,
            gold: 1000,
            army: 10,
            tanks: 0,
            planes: 0,
            ships: 0,
            totalPurchased: 0,
            goldSpent: 0,
            battlesWon: 0,
            battlesLost: 0,
            questsCompleted: [],
            questLevel: 'starter'
        };

        // Quest definitions
        const starterQuests = [
            { id: 'attack_country', name: 'Attack a country', reward: 100, check: () => gameState.battlesWon + gameState.battlesLost >= 1 },
            { id: 'buy_10_army', name: 'Buy +10 army from shop', reward: 300, check: () => gameState.totalPurchased >= 10 },
            { id: 'get_100_army', name: 'Get 100 army', reward: 500, check: () => gameState.army >= 100 }
        ];

        const normalQuests = [
            { id: 'win_5_battles', name: 'Win 5 battles', reward: 800, check: () => gameState.battlesWon >= 5 },
            { id: 'get_500_army', name: 'Get 500 army', reward: 1500, check: () => gameState.army >= 500 },
            { id: 'spend_2000_gold', name: 'Spend 2000 gold in shop', reward: 1000, check: () => gameState.goldSpent >= 2000 }
        ];

        const hardQuests = [
            { id: 'win_15_battles', name: 'Win 15 battles', reward: 2000, check: () => gameState.battlesWon >= 15 },
            { id: 'get_2000_army', name: 'Get 2000 army', reward: 5000, check: () => gameState.army >= 2000 },
            { id: 'spend_10000_gold', name: 'Spend 10000 gold in shop', reward: 3000, check: () => gameState.goldSpent >= 10000 }
        ];

        // Country Selection
        const countryCards = document.querySelectorAll('.country-card');
        const startBtn = document.getElementById('start-btn');

        countryCards.forEach(card => {
            card.addEventListener('click', () => {
                countryCards.forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
                gameState.country = card.dataset.country;
                gameState.flag = card.dataset.flag;
                startBtn.classList.add('active');
            });
        });

        // Start Game
        startBtn.addEventListener('click', () => {
            if (gameState.country) {
                document.getElementById('country-selection').style.display = 'none';
                document.getElementById('game-screen').style.display = 'block';
                document.getElementById('player-flag').textContent = gameState.flag;
                document.getElementById('player-country').textContent = gameState.country;
                updateDisplays();
            }
        });

        // Update all displays
        function updateDisplays() {
            document.getElementById('gold-display').textContent = gameState.gold;
            document.getElementById('army-display').textContent = gameState.army;
            document.getElementById('army-header-display').textContent = gameState.army;
            document.getElementById('tanks-display').textContent = gameState.tanks;
            document.getElementById('tanks-header-display').textContent = gameState.tanks;
            document.getElementById('planes-display').textContent = gameState.planes;
            document.getElementById('planes-header-display').textContent = gameState.planes;
            document.getElementById('ships-display').textContent = gameState.ships;
            document.getElementById('ships-header-display').textContent = gameState.ships;
            document.getElementById('stat-country').textContent = gameState.country;
            document.getElementById('stat-gold').textContent = gameState.gold;
            document.getElementById('stat-army').textContent = gameState.army;
            document.getElementById('stat-tanks').textContent = gameState.tanks;
            document.getElementById('stat-planes').textContent = gameState.planes;
            document.getElementById('stat-ships').textContent = gameState.ships;
            document.getElementById('stat-purchased').textContent = gameState.totalPurchased;
            document.getElementById('stat-spent').textContent = gameState.goldSpent;
            document.getElementById('stat-won').textContent = gameState.battlesWon || 0;
            document.getElementById('stat-lost').textContent = gameState.battlesLost || 0;
        }

        // Modal Functions
        function openModal(type) {
            if (type === 'attack') {
                generateEnemyList();
            }
            if (type === 'quests') {
                renderQuests();
            }
            document.getElementById(type + '-modal').classList.add('active');
            updateDisplays();
        }

        function closeModal(type) {
            document.getElementById(type + '-modal').classList.remove('active');
        }

        // Close modal when clicking outside
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    overlay.classList.remove('active');
                }
            });
        });

        // Shop Functions
        function buyArmy(amount, cost) {
            if (gameState.gold >= cost) {
                gameState.gold -= cost;
                gameState.army += amount;
                gameState.totalPurchased += amount;
                gameState.goldSpent += cost;
                updateDisplays();
            } else {
                alert('Not enough gold!');
            }
        }

        function buyUnit(unitType, amount, cost) {
            if (gameState.gold >= cost) {
                gameState.gold -= cost;
                gameState[unitType] += amount;
                gameState.goldSpent += cost;
                updateDisplays();
            } else {
                alert('Not enough gold!');
            }
        }

        // Settings Functions
        function toggleSetting(btn) {
            btn.classList.toggle('active');
        }

        function resetGame() {
            if (confirm('Are you sure you want to reset the game?')) {
                gameState = {
                    country: null,
                    flag: null,
                    gold: 1000,
                    army: 10,
                    tanks: 0,
                    planes: 0,
                    ships: 0,
                    totalPurchased: 0,
                    goldSpent: 0,
                    battlesWon: 0,
                    battlesLost: 0,
                    questsCompleted: [],
                    questLevel: 'starter'
                };
                document.getElementById('game-screen').style.display = 'none';
                document.getElementById('country-selection').style.display = 'flex';
                countryCards.forEach(c => c.classList.remove('selected'));
                startBtn.classList.remove('active');
                closeModal('settings');
            }
        }

        // Passive gold income
        setInterval(() => {
            if (gameState.country) {
                gameState.gold += 10;
                updateDisplays();
            }
        }, 5000);

        // All countries data
        const allCountries = [
            { name: 'Spain', flag: 'üá™üá∏' },
            { name: 'France', flag: 'üá´üá∑' },
            { name: 'Germany', flag: 'üá©üá™' },
            { name: 'United Kingdom', flag: 'üá¨üáß' },
            { name: 'Italy', flag: 'üáÆüáπ' },
            { name: 'Lithuania', flag: 'üá±üáπ' },
            { name: 'Belgium', flag: 'üáßüá™' }
        ];

        // Generate enemy countries list (excluding player's country)
        function generateEnemyList() {
            const container = document.getElementById('attack-countries-list');
            container.innerHTML = '';

            allCountries.forEach(country => {
                if (country.name !== gameState.country) {
                    const enemyDiv = document.createElement('div');
                    enemyDiv.className = 'enemy-country';
                    enemyDiv.innerHTML = `
                        <div class="enemy-info">
                            <span class="enemy-flag">${country.flag}</span>
                            <div>
                                <div class="enemy-name">${country.name}</div>
                                <div class="enemy-army">Forces: ???</div>
                            </div>
                        </div>
                        <button class="attack-country-btn" onclick="selectTarget('${country.name}', '${country.flag}')">‚öîÔ∏è Attack</button>
                    `;
                    container.appendChild(enemyDiv);
                }
            });
        }

        // Attack setup state
        let attackTarget = { name: '', flag: '' };

        // Select target country and open setup
        function selectTarget(name, flag) {
            attackTarget = { name, flag };
            closeModal('attack');

            document.getElementById('target-country-name').textContent = name;
            document.getElementById('target-country-flag').textContent = flag;
            document.getElementById('available-soldiers').textContent = gameState.army;
            document.getElementById('available-tanks').textContent = gameState.tanks;
            document.getElementById('available-planes').textContent = gameState.planes;
            document.getElementById('available-ships').textContent = gameState.ships;
            document.getElementById('soldiers-input').value = Math.min(10, gameState.army);
            document.getElementById('soldiers-input').max = gameState.army;
            document.getElementById('tanks-input').value = 0;
            document.getElementById('planes-input').value = 0;
            document.getElementById('ships-input').value = 0;

            updateTotalPower();
            openModal('attack-setup');
        }

        // Adjust soldiers
        function adjustSoldiers(amount) {
            const input = document.getElementById('soldiers-input');
            let newValue = parseInt(input.value) + amount;
            newValue = Math.max(1, Math.min(newValue, gameState.army));
            input.value = newValue;
            updateTotalPower();
        }

        // Adjust any unit
        function adjustUnit(unitType, amount) {
            const input = document.getElementById(unitType + '-input');
            let newValue = parseInt(input.value) + amount;
            newValue = Math.max(0, Math.min(newValue, gameState[unitType]));
            input.value = newValue;
            updateTotalPower();
        }

        // Set max soldiers
        function setMaxSoldiers() {
            document.getElementById('soldiers-input').value = gameState.army;
            updateTotalPower();
        }

        // Set max for any unit
        function setMaxUnit(unitType) {
            document.getElementById(unitType + '-input').value = gameState[unitType];
            updateTotalPower();
        }

        // Update total power display
        function updateTotalPower() {
            const soldiers = parseInt(document.getElementById('soldiers-input').value) || 0;
            const tanks = parseInt(document.getElementById('tanks-input').value) || 0;
            const planes = parseInt(document.getElementById('planes-input').value) || 0;
            const ships = parseInt(document.getElementById('ships-input').value) || 0;
            const totalPower = soldiers + (tanks * 50) + (planes * 75) + (ships * 100);
            document.getElementById('total-power').textContent = totalPower;
        }

        // Launch the attack
        function launchAttack() {
            const soldiersSent = parseInt(document.getElementById('soldiers-input').value) || 0;
            const tanksSent = parseInt(document.getElementById('tanks-input').value) || 0;
            const planesSent = parseInt(document.getElementById('planes-input').value) || 0;
            const shipsSent = parseInt(document.getElementById('ships-input').value) || 0;

            if (soldiersSent < 1) {
                alert('You must send at least 1 soldier!');
                return;
            }
            if (soldiersSent > gameState.army) {
                alert('Not enough soldiers!');
                return;
            }
            if (tanksSent > gameState.tanks) {
                alert('Not enough tanks!');
                return;
            }
            if (planesSent > gameState.planes) {
                alert('Not enough planes!');
                return;
            }
            if (shipsSent > gameState.ships) {
                alert('Not enough battleships!');
                return;
            }

            closeModal('attack-setup');

            // Calculate player power
            const playerPower = soldiersSent + (tanksSent * 50) + (planesSent * 75) + (shipsSent * 100);

            // Generate enemy forces
            const enemySoldiers = Math.floor(Math.random() * (playerPower * 0.6)) + Math.floor(playerPower * 0.2);
            const enemyTanks = Math.floor(Math.random() * (tanksSent + 2));
            const enemyPlanes = Math.floor(Math.random() * (planesSent + 2));
            const enemyShips = Math.floor(Math.random() * (shipsSent + 1));
            const enemyPower = enemySoldiers + (enemyTanks * 50) + (enemyPlanes * 75) + (enemyShips * 100);

            // Add randomness to battle
            const playerRoll = playerPower + Math.floor(Math.random() * 50);
            const enemyRoll = enemyPower + Math.floor(Math.random() * 50);

            const victory = playerRoll > enemyRoll;

            // Calculate losses and gains
            let losses = {}, gained = {}, goldReward;

            if (victory) {
                losses.soldiers = Math.floor(soldiersSent * (0.1 + Math.random() * 0.2));
                losses.tanks = Math.floor(tanksSent * Math.random() * 0.2);
                losses.planes = Math.floor(planesSent * Math.random() * 0.2);
                losses.ships = Math.floor(shipsSent * Math.random() * 0.15);

                gained.soldiers = Math.floor(enemySoldiers * 0.5);
                gained.tanks = Math.floor(enemyTanks * 0.3);
                gained.planes = Math.floor(enemyPlanes * 0.25);
                gained.ships = Math.floor(enemyShips * 0.2);
                goldReward = Math.floor(Math.random() * 500) + 200;

                gameState.army = gameState.army - losses.soldiers + gained.soldiers;
                gameState.tanks = gameState.tanks - losses.tanks + gained.tanks;
                gameState.planes = gameState.planes - losses.planes + gained.planes;
                gameState.ships = gameState.ships - losses.ships + gained.ships;
                gameState.gold += goldReward;
                gameState.battlesWon = (gameState.battlesWon || 0) + 1;
            } else {
                losses.soldiers = Math.floor(soldiersSent * (0.4 + Math.random() * 0.3));
                losses.tanks = Math.floor(tanksSent * (0.3 + Math.random() * 0.3));
                losses.planes = Math.floor(planesSent * (0.3 + Math.random() * 0.3));
                losses.ships = Math.floor(shipsSent * (0.25 + Math.random() * 0.25));
                gained = { soldiers: 0, tanks: 0, planes: 0, ships: 0 };
                goldReward = 0;

                gameState.army = Math.max(1, gameState.army - losses.soldiers);
                gameState.tanks = Math.max(0, gameState.tanks - losses.tanks);
                gameState.planes = Math.max(0, gameState.planes - losses.planes);
                gameState.ships = Math.max(0, gameState.ships - losses.ships);
                gameState.battlesLost = (gameState.battlesLost || 0) + 1;
            }

            // Show battle result
            showBattleResult(victory, attackTarget.name, attackTarget.flag,
                { soldiers: enemySoldiers, tanks: enemyTanks, planes: enemyPlanes, ships: enemyShips, power: enemyPower },
                losses, gained, goldReward);
            updateDisplays();
        }

        // Show battle result modal
        function showBattleResult(victory, enemyName, enemyFlag, enemyForces, losses, gained, goldReward) {
            const resultDiv = document.getElementById('battle-result');
            const title = document.getElementById('battle-title');

            title.textContent = victory ? 'üéâ Victory!' : 'üíÄ Defeat!';

            resultDiv.innerHTML = `
                <div class="battle-result-content">
                    <div class="battle-icon">${victory ? 'üèÜ' : 'üíî'}</div>
                    <div class="battle-status ${victory ? 'victory' : 'defeat'}">
                        ${victory ? 'You Won!' : 'You Lost!'}
                    </div>
                    <p>Battle against ${enemyFlag} ${enemyName}</p>

                    <div class="enemy-forces">
                        <div class="enemy-forces-title">Enemy Forces Revealed:</div>
                        <div class="battle-detail-row">
                            <span>‚öîÔ∏è Soldiers</span>
                            <span>${enemyForces.soldiers}</span>
                        </div>
                        <div class="battle-detail-row">
                            <span>üõ°Ô∏è Tanks</span>
                            <span>${enemyForces.tanks}</span>
                        </div>
                        <div class="battle-detail-row">
                            <span>‚úàÔ∏è Planes</span>
                            <span>${enemyForces.planes}</span>
                        </div>
                        <div class="battle-detail-row">
                            <span>üö¢ Ships</span>
                            <span>${enemyForces.ships}</span>
                        </div>
                        <div class="battle-detail-row">
                            <span>üí™ Total Power</span>
                            <span>${enemyForces.power}</span>
                        </div>
                    </div>

                    <div class="battle-details">
                        <div class="battle-detail-row">
                            <span>Soldier Losses</span>
                            <span class="battle-loss">-${losses.soldiers}</span>
                        </div>
                        ${losses.tanks > 0 ? `
                        <div class="battle-detail-row">
                            <span>Tank Losses</span>
                            <span class="battle-loss">-${losses.tanks}</span>
                        </div>
                        ` : ''}
                        ${losses.planes > 0 ? `
                        <div class="battle-detail-row">
                            <span>Plane Losses</span>
                            <span class="battle-loss">-${losses.planes}</span>
                        </div>
                        ` : ''}
                        ${losses.ships > 0 ? `
                        <div class="battle-detail-row">
                            <span>Ship Losses</span>
                            <span class="battle-loss">-${losses.ships}</span>
                        </div>
                        ` : ''}
                        ${victory ? `
                        <div class="battle-detail-row">
                            <span>Soldiers Captured</span>
                            <span class="battle-reward">+${gained.soldiers}</span>
                        </div>
                        ${gained.tanks > 0 ? `
                        <div class="battle-detail-row">
                            <span>Tanks Captured</span>
                            <span class="battle-reward">+${gained.tanks}</span>
                        </div>
                        ` : ''}
                        ${gained.planes > 0 ? `
                        <div class="battle-detail-row">
                            <span>Planes Captured</span>
                            <span class="battle-reward">+${gained.planes}</span>
                        </div>
                        ` : ''}
                        ${gained.ships > 0 ? `
                        <div class="battle-detail-row">
                            <span>Ships Captured</span>
                            <span class="battle-reward">+${gained.ships}</span>
                        </div>
                        ` : ''}
                        <div class="battle-detail-row">
                            <span>Gold Looted</span>
                            <span class="battle-reward">+${goldReward}</span>
                        </div>
                        ` : ''}
                        <div class="battle-detail-row" style="border-top: 1px solid rgba(255,255,255,0.2); margin-top: 10px; padding-top: 15px;">
                            <span>Your Forces Now</span>
                            <span>‚öîÔ∏è${gameState.army} üõ°Ô∏è${gameState.tanks} ‚úàÔ∏è${gameState.planes} üö¢${gameState.ships}</span>
                        </div>
                    </div>
                </div>
            `;

            openModal('battle');
        }

        // Get current quests based on level
        function getCurrentQuests() {
            if (gameState.questLevel === 'starter') return starterQuests;
            if (gameState.questLevel === 'normal') return normalQuests;
            if (gameState.questLevel === 'hard') return hardQuests;
            return [];
        }

        // Get quest level title
        function getQuestLevelTitle() {
            if (gameState.questLevel === 'starter') return 'üåü Starter Quests';
            if (gameState.questLevel === 'normal') return '‚öîÔ∏è Normal Quests';
            if (gameState.questLevel === 'hard') return 'üî• Hard Quests';
            return 'üèÜ All Quests Completed!';
        }

        // Check if all current quests are completed
        function checkQuestLevelComplete() {
            const quests = getCurrentQuests();
            const allCompleted = quests.every(q => gameState.questsCompleted.includes(q.id));

            if (allCompleted) {
                if (gameState.questLevel === 'starter') {
                    gameState.questLevel = 'normal';
                } else if (gameState.questLevel === 'normal') {
                    gameState.questLevel = 'hard';
                } else if (gameState.questLevel === 'hard') {
                    gameState.questLevel = 'completed';
                }
            }
        }

        // Render quests in modal
        function renderQuests() {
            const container = document.getElementById('quests-content');
            const quests = getCurrentQuests();
            const title = getQuestLevelTitle();

            if (gameState.questLevel === 'completed') {
                container.innerHTML = `
                    <div class="quest-category">
                        <div class="quest-category-title">üèÜ All Quests Completed!</div>
                        <p style="text-align: center; opacity: 0.8; padding: 20px;">
                            Congratulations! You have completed all quests!<br>
                            You are a true conqueror!
                        </p>
                    </div>
                `;
                return;
            }

            let html = `<div class="quest-category"><div class="quest-category-title">${title}</div>`;

            quests.forEach(quest => {
                const isComplete = quest.check();
                const isClaimed = gameState.questsCompleted.includes(quest.id);

                html += `
                    <div class="quest-item ${isClaimed ? 'completed' : ''}">
                        <div class="quest-info">
                            <div class="quest-name">${quest.name}</div>
                            <div class="quest-progress">${isComplete ? '‚úÖ Completed' : '‚è≥ In Progress'}</div>
                        </div>
                        ${isClaimed
                            ? '<span class="quest-check">‚úì</span>'
                            : isComplete
                                ? `<button class="claim-btn" onclick="claimQuest('${quest.id}', ${quest.reward})">Claim üí∞${quest.reward}</button>`
                                : `<span class="quest-reward">üí∞ ${quest.reward}</span>`
                        }
                    </div>
                `;
            });

            html += '</div>';
            container.innerHTML = html;
        }

        // Claim quest reward
        function claimQuest(questId, reward) {
            if (!gameState.questsCompleted.includes(questId)) {
                gameState.questsCompleted.push(questId);
                gameState.gold += reward;
                checkQuestLevelComplete();
                renderQuests();
                updateDisplays();
            }
        }
    </script>
</body>
</html>
