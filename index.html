<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Country War Game - Multiplayer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Sync Indicator -->
    <div class="sync-indicator" id="sync-indicator">ğŸ”„ Synced!</div>

    <!-- Country Selection Screen -->
    <div id="country-selection">
        <h1 data-translate="chooseCountry">Choose Your Country</h1>
        <div class="countries-container">
            <div class="country-card" data-country="Spain" data-flag="ğŸ‡ªğŸ‡¸">
                 <div class="country-flag">ğŸ‡ªğŸ‡¸</div>
                <div class="country-name">Spain</div>
            </div>
            <div class="country-card" data-country="France" data-flag="ğŸ‡«ğŸ‡·">
                <div class="country-flag">ğŸ‡«ğŸ‡·</div>
      <option value="fr">ğŸ‡«ğŸ‡· Francais</option>
                </select>
            </div>
            <div class="setting-row">
                <span data-translate="sound">Sound Effects</span>
                <button class="toggle-btn active" onclick="toggleSetting(this)"></button>
            </div>
            <div class="setting-row">
                <span>Music</span>
                <button class="toggle-btn active" onclick="toggleSetting(this)"></button>
            </div>
            <div class="setting-row">
                <span data-translate="notifications">Notifications</span>
                <button class="toggle-btn" onclick="toggleSetting(this)"></button>
            </div>
            <button class="reset-btn" onclick="resetGame()" data-translate="resetGame">Reset Game</button>
        </div>
    </div>

    <!-- Attack Modal -->
    <div class="modal-overlay" id="attack-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>âš”ï¸ <span data-translate="attackTitle">Select Target</span></h2>
                <button class="close-btn" onclick="closeModal('attack')">&times;</button>
            </div>
            <p style="margin-bottom: 20px; opacity: 0.8;">Choose a country to attack:</p>
            <div id="attack-countries-list"></div>
        </div>
    </div>

    <!-- City Selection Modal -->
    <div class="modal-overlay" id="city-selection-modal">
        <div class="modal large">
            <div class="modal-header">
                <h2>ğŸ™ï¸ <span data-translate="selectCity">Select City to Attack</span></h2>
                <button class="close-btn" onclick="closeModal('city-selection')">&times;</button>
            </div>
            <div id="city-selection-title"></div>
            <div class="city-list" id="city-list"></div>
        </div>
    </div>

    <!-- Attack Setup Modal -->
    <div class="modal-overlay" id="attack-setup-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>âš”ï¸ Prepare Attack</h2>
                <button class="close-btn" onclick="closeModal('attack-setup')">&times;</button>
            </div>
            <p style="margin-bottom: 15px;">Attacking: <strong id="target-country-name"></strong> <span id="target-country-flag"></span></p>

            <div class="attack-setup-row">
                <label>Soldiers to send:</label>
                <div class="input-group">
                    <button class="adjust-btn" onclick="adjustSoldiers(-10)">-10</button>
                    <input type="number" id="soldiers-input" value="10" min="1">
                    <button class="adjust-btn" onclick="adjustSoldiers(10)">+10</button>
                    <button class="adjust-btn max-btn" onclick="setMaxSoldiers()">MAX</button>
                </div>
                <span class="available">Available: <span id="available-soldiers">10</span></span>
            </div>

            <div class="attack-setup-row">
                <label>Tanks to send: <small>(50 power each)</small></label>
                <div class="input-group">
                    <button class="adjust-btn" onclick="adjustUnit('tanks', -1)">-1</button>
                    <input type="number" id="tanks-input" value="0" min="0" onchange="updateTotalPower()">
                    <button class="adjust-btn" onclick="adjustUnit('tanks', 1)">+1</button>
                    <button class="adjust-btn max-btn" onclick="setMaxUnit('tanks')">MAX</button>
                </div>
                <span class="available">Available: <span id="available-tanks">0</span></span>
            </div>

            <div class="attack-setup-row">
                <label>Planes to send: <small>(75 power each)</small></label>
                <div class="input-group">
                    <button class="adjust-btn" onclick="adjustUnit('planes', -1)">-1</button>
                    <input type="number" id="planes-input" value="0" min="0" onchange="updateTotalPower()">
                    <button class="adjust-btn" onclick="adjustUnit('planes', 1)">+1</button>
                    <button class="adjust-btn max-btn" onclick="setMaxUnit('planes')">MAX</button>
                </div>
                <span class="available">Available: <span id="available-planes">0</span></span>
            </div>

            <div class="attack-setup-row">
                <label>Battleships to send: <small>(100 power each)</small></label>
                <div class="input-group">
                    <button class="adjust-btn" onclick="adjustUnit('ships', -1)">-1</button>
                    <input type="number" id="ships-input" value="0" min="0" onchange="updateTotalPower()">
                    <button class="adjust-btn" onclick="adjustUnit('ships', 1)">+1</button>
                    <button class="adjust-btn max-btn" onclick="setMaxUnit('ships')">MAX</button>
                </div>
                <span class="available">Available: <span id="available-ships">0</span></span>
            </div>

            <div class="attack-setup-row">
                <label>Combat Drones to send: <small>(150 power each)</small></label>
                <div class="input-group">
                    <button class="adjust-btn" onclick="adjustUnit('drones', -1)">-1</button>
                    <input type="number" id="drones-input" value="0" min="0" onchange="updateTotalPower()">
                    <button class="adjust-btn" onclick="adjustUnit('drones', 1)">+1</button>
                    <button class="adjust-btn max-btn" onclick="setMaxUnit('drones')">MAX</button>
                </div>
                <span class="available">Available: <span id="available-drones">0</span></span>
            </div>

            <div class="attack-setup-row">
                <label>Bombs to send: <small>(300 power each)</small></label>
                <div class="input-group">
                    <button class="adjust-btn" onclick="adjustUnit('bombs', -1)">-1</button>
                    <input type="number" id="bombs-input" value="0" min="0" onchange="updateTotalPower()">
                    <button class="adjust-btn" onclick="adjustUnit('bombs', 1)">+1</button>
                    <button class="adjust-btn max-btn" onclick="setMaxUnit('bombs')">MAX</button>
                </div>
                <span class="available">Available: <span id="available-bombs">0</span></span>
            </div>

            <div class="total-power">
                Total Attack Power: <span id="total-power">10</span>
            </div>

            <button class="launch-attack-btn" onclick="launchAttack()">ğŸš€ Launch Attack!</button>
        </div>
    </div>

    <!-- Battle Result Modal -->
    <div class="modal-overlay" id="battle-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="battle-title">Battle Result</h2>
                <button class="close-btn" onclick="closeModal('battle')">&times;</button>
            </div>
            <div id="battle-result"></div>
        </div>
    </div>

    <!-- Attacking Progress Modal -->
    <div class="modal-overlay" id="attacking-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>âš”ï¸ Attacking...</h2>
            </div>
            <div class="attacking-content">
                <div class="attacking-icon">âš”ï¸</div>
                <div class="attacking-title">ATTACKING</div>
                <div class="attacking-target" id="attacking-target-display"></div>
                <div class="progress-container">
                    <div class="progress-bar" id="attack-progress-bar"></div>
                </div>
                <div class="progress-text" id="attack-progress-text">0%</div>
                <div class="attacking-status" id="attacking-status">Preparing forces...</div>
            </div>
        </div>
    </div>

    <!-- Quests Modal -->
    <div class="modal-overlay" id="quests-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>ğŸ“œ Quests</h2>
                <button class="close-btn" onclick="closeModal('quests')">&times;</button>
            </div>
            <div id="quests-content"></div>
        </div>
    </div>

    <!-- Code Redemption Modal -->
    <div class="modal-overlay" id="code-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>ğŸ Redeem Code</h2>
                <button class="close-btn" onclick="closeModal('code')">&times;</button>
            </div>
            <p style="margin-bottom: 20px; opacity: 0.8;">Enter a code to receive rewards!</p>
            <div class="code-input-container">
                <input type="text" id="code-input" placeholder="Enter code here..." class="code-input">
                <button class="redeem-btn" onclick="redeemCode()">Redeem</button>
            </div>
            <div id="code-message" class="code-message"></div>
            <div class="redeemed-codes">
                <h3>Redeemed Codes:</h3>
                <div id="redeemed-list"></div>
            </div>
        </div>
    </div>

    <!-- Team Modal -->
    <div class="modal-overlay" id="team-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>ğŸ‘¥ Teams</h2>
                <button class="close-btn" onclick="closeModal('team')">&times;</button>
            </div>
            <div id="team-content"></div>
        </div>
    </div>

    <!-- Create Team Modal -->
    <div class="modal-overlay" id="create-team-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>âœ¨ Create Team</h2>
                <button class="close-btn" onclick="closeModal('create-team')">&times;</button>
            </div>
            <div class="team-form-group">
                <label>Team Name</label>
                <input type="text" id="team-name-input" class="team-input" placeholder="Enter team name..." maxlength="20">
            </div>
            <div class="team-form-group">
                <label>Team Country</label>
                <div class="country-select-grid" id="team-country-select"></div>
            </div>
            <div class="team-form-group">
                <label>Description</label>
                <textarea id="team-desc-input" class="team-textarea" placeholder="Describe your team..." maxlength="100"></textarea>
            </div>
            <div class="team-form-group">
                <label>Privacy</label>
                <div class="privacy-toggle">
                    <button class="privacy-option selected" id="privacy-public" onclick="selectPrivacy('public')">ğŸŒ Public</button>
                    <button class="privacy-option" id="privacy-private" onclick="selectPrivacy('private')">ğŸ”’ Private</button>
                </div>
            </div>
            <div id="team-code-container" style="display: none;">
                <div class="team-code-display">
                    <p style="margin-bottom: 10px; opacity: 0.8;">Your team code will appear after creation</p>
                    <div class="code" id="generated-team-code">-----</div>
                </div>
            </div>
            <button class="create-team-btn" onclick="createTeam()">ğŸš€ Create Team</button>
        </div>
    </div>

    <!-- Join Team Modal -->
    <div class="modal-overlay" id="join-team-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>ğŸ”— Join Team</h2>
                <button class="close-btn" onclick="closeModal('join-team')">&times;</button>
            </div>
            <p style="margin-bottom: 20px; opacity: 0.8;">Enter a team code to join:</p>
            <div class="team-form-group">
                <label>Team Code</label>
                <input type="text" id="join-team-code" class="team-input" placeholder="Enter 5-digit code..." maxlength="5">
            </div>
            <div id="join-team-message" class="code-message"></div>
            <button class="create-team-btn" style="background: linear-gradient(135deg, #0984e3, #0773c7);" onclick="joinTeamByCode()">ğŸ”— Join Team</button>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>
